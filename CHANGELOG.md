# Changelog
## [0.1.0] - 2024-11-04
### Added
- добавлен функционал сохранения каталога магазина в файл JSON
<div class="markdown prose w-full break-words dark:prose-invert light"><p>Класс <code>BreadcrumbsToCatalogParser</code> отвечает за создание иерархического каталога на основе массива JSON-строк с данными о "breadcrumbs" (хлебных крошках). Давайте разберем его по шагам:</p><h3>Полный разбор кода</h3><ol><li><p><strong>Поля класса и импорты</strong>:</p><ul><li><code>Map&lt;String, Object&gt; catalog = new HashMap&lt;&gt;();</code> — здесь создается объект <code>Map</code>, который будет представлять корневой уровень каталога. В этом объекте будут храниться все категории с их вложенными подкатегориями.</li><li>Импортируем <code>JsonParser</code>, <code>JsonObject</code>, и <code>JsonElement</code> из библиотеки <code>Gson</code> для обработки JSON-строк.</li></ul></li><li><p><strong>Метод <code>buildCatalog</code></strong>:</p><ul><li><strong>Параметр <code>String[] breadcrumbsData</code></strong>: Метод принимает массив JSON-строк. Каждая строка содержит "breadcrumbs" для одной категории в виде JSON-объекта.</li><li><strong>Возвращаемое значение</strong>: Метод возвращает иерархическую структуру <code>Map&lt;String, Object&gt;</code>, представляющую каталог.</li></ul></li></ol><h4>Основной процесс в методе <code>buildCatalog</code></h4><pre class="!overflow-visible"><div class="contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative bg-token-sidebar-surface-primary dark:bg-gray-950"><div class="flex items-center text-token-text-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9 bg-token-sidebar-surface-primary dark:bg-token-main-surface-secondary">java</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-sidebar-surface-primary px-2 font-sans text-xs text-token-text-secondary dark:bg-token-main-surface-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Копіювати код</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-java"><span class="hljs-keyword">for</span> (String breadcrumbsJson : breadcrumbsData) {
    <span class="hljs-type">JsonObject</span> <span class="hljs-variable">breadcrumbObj</span> <span class="hljs-operator">=</span> JsonParser.parseString(breadcrumbsJson).getAsJsonObject();
    Map&lt;String, Object&gt; currentLevel = catalog;
</code></div></div></pre><ul><li><strong>Цикл <code>for</code></strong>: Идем по каждой JSON-строке в массиве <code>breadcrumbsData</code>.<ul><li><code>JsonObject breadcrumbObj = JsonParser.parseString(breadcrumbsJson).getAsJsonObject();</code> — каждый элемент массива (строка) парсится в <code>JsonObject</code>. Этот объект представляет собой структуру данных "breadcrumbs" для конкретной категории.</li><li><code>Map&lt;String, Object&gt; currentLevel = catalog;</code> — <code>currentLevel</code> указывает на текущий уровень вложенности в каталоге. Изначально <code>currentLevel</code> равен корневому уровню каталога (<code>catalog</code>).</li></ul></li></ul><h4>Вложенный цикл <code>for</code> по элементам <code>breadcrumbObj</code></h4><pre class="!overflow-visible"><div class="contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative bg-token-sidebar-surface-primary dark:bg-gray-950"><div class="flex items-center text-token-text-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9 bg-token-sidebar-surface-primary dark:bg-token-main-surface-secondary">java</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-sidebar-surface-primary px-2 font-sans text-xs text-token-text-secondary dark:bg-token-main-surface-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Копіювати код</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-java"><span class="hljs-keyword">for</span> (Map.Entry&lt;String, JsonElement&gt; entry : breadcrumbObj.entrySet()) {
    <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> entry.getKey();
    <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> entry.getValue().getAsString();
</code></div></div></pre><ul><li>Внутренний цикл <code>for</code> проходит по ключам и значениям текущего <code>breadcrumbObj</code>.<ul><li><code>name</code> — это название категории на данном уровне.</li><li><code>url</code> — это URL-адрес для этой категории.</li></ul></li></ul><h4>Проверка и создание нового уровня в каталоге</h4><pre class="!overflow-visible"><div class="contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative bg-token-sidebar-surface-primary dark:bg-gray-950"><div class="flex items-center text-token-text-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9 bg-token-sidebar-surface-primary dark:bg-token-main-surface-secondary">java</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-sidebar-surface-primary px-2 font-sans text-xs text-token-text-secondary dark:bg-token-main-surface-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Копіювати код</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-java"><span class="hljs-keyword">if</span> (!currentLevel.containsKey(name)) {
    Map&lt;String, Object&gt; newCategory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    newCategory.put(<span class="hljs-string">"url"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonPrimitive</span>(url));
    newCategory.put(<span class="hljs-string">"subcategories"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;String, Object&gt;());
    currentLevel.put(name, newCategory);
}
</code></div></div></pre><ul><li>Проверка, содержит ли <code>currentLevel</code> ключ с именем категории (<code>name</code>). Если ключа нет:<ul><li><strong>Создаем новый <code>Map</code></strong> для этой категории и называем его <code>newCategory</code>.</li><li><strong>Добавляем URL</strong>: <code>newCategory.put("url", new JsonPrimitive(url));</code> — добавляем URL в <code>newCategory</code> в виде объекта <code>JsonPrimitive</code>.</li><li><strong>Добавляем подкатегории</strong>: <code>newCategory.put("subcategories", new HashMap&lt;String, Object&gt;());</code> — добавляем ключ <code>subcategories</code>, который инициализируется пустым <code>Map</code>. Этот <code>Map</code> будет содержать все подкатегории.</li><li><code>currentLevel.put(name, newCategory);</code> — добавляем <code>newCategory</code> в <code>currentLevel</code>.</li></ul></li></ul><h4>Переход на уровень вложенных категорий</h4><pre class="!overflow-visible"><div class="contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative bg-token-sidebar-surface-primary dark:bg-gray-950"><div class="flex items-center text-token-text-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9 bg-token-sidebar-surface-primary dark:bg-token-main-surface-secondary">java</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-sidebar-surface-primary px-2 font-sans text-xs text-token-text-secondary dark:bg-token-main-surface-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Копіювати код</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-java">currentLevel = (Map&lt;String, Object&gt;) ((Map&lt;String, Object&gt;) currentLevel.get(name)).get(<span class="hljs-string">"subcategories"</span>);
</code></div></div></pre><ul><li>Внутренние категории хранятся в <code>subcategories</code> текущей категории.</li><li>Обновляем <code>currentLevel</code>, чтобы перейти на уровень подкатегорий текущей категории. Этот шаг позволяет добавлять подкатегории на следующий уровень вложенности в следующей итерации.</li></ul><h3>Завершение метода</h3><p>После завершения всех итераций внешний каталог <code>catalog</code> будет содержать иерархическую структуру с категориями и подкатегориями.</p><h3>Итоговый результат</h3><p><code>buildCatalog</code> возвращает объект <code>catalog</code>, который представляет иерархию каталога с вложенными категориями и их URL.</p><h3>Пример работы</h3><p>Входные данные:</p><pre class="!overflow-visible"><div class="contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative bg-token-sidebar-surface-primary dark:bg-gray-950"><div class="flex items-center text-token-text-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9 bg-token-sidebar-surface-primary dark:bg-token-main-surface-secondary">json</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-sidebar-surface-primary px-2 font-sans text-xs text-token-text-secondary dark:bg-token-main-surface-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Копіювати код</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-json"><span class="hljs-punctuation">[</span>
    <span class="hljs-string">"{\"Electronics\": \"http://example.com/electronics\"}"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"{\"Electronics\": \"http://example.com/electronics\", \"Phones\": \"http://example.com/electronics/phones\"}"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"{\"Electronics\": \"http://example.com/electronics\", \"Phones\": \"http://example.com/electronics/phones\", \"Smartphones\": \"http://example.com/electronics/phones/smartphones\"}"</span>
<span class="hljs-punctuation">]</span>
</code></div></div></pre><p>Выход:</p><pre class="!overflow-visible"><div class="contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative bg-token-sidebar-surface-primary dark:bg-gray-950"><div class="flex items-center text-token-text-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9 bg-token-sidebar-surface-primary dark:bg-token-main-surface-secondary">java</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-sidebar-surface-primary px-2 font-sans text-xs text-token-text-secondary dark:bg-token-main-surface-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Копіювати код</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-java">{
    <span class="hljs-string">"Electronics"</span>: {
        <span class="hljs-string">"url"</span>: <span class="hljs-string">"http://example.com/electronics"</span>,
        <span class="hljs-string">"subcategories"</span>: {
            <span class="hljs-string">"Phones"</span>: {
                <span class="hljs-string">"url"</span>: <span class="hljs-string">"http://example.com/electronics/phones"</span>,
                <span class="hljs-string">"subcategories"</span>: {
                    <span class="hljs-string">"Smartphones"</span>: {
                        <span class="hljs-string">"url"</span>: <span class="hljs-string">"http://example.com/electronics/phones/smartphones"</span>,
                        <span class="hljs-string">"subcategories"</span>: {}
                    }
                }
            }
        }
    }
}
</code></div></div></pre><p>Этот объект позволяет легко навигировать по иерархии и получать доступ к вложенным подкатегориям и их URL.</p></div>

### Fixed
- без изменений

### Changed
- добавлен метод для получения списка всех категорий и их URL   

<div class="markdown prose w-full break-words dark:prose-invert light"><p>Метод <code>createCatalogForShop</code> создает иерархический каталог для конкретного магазина на основе его данных о "breadcrumbs" (хлебных крошках), а затем записывает этот каталог в файл в формате JSON. Рассмотрим метод по шагам:</p><h3>1. Аннотация <code>@GetMapping("/create-catalog-for-shop")</code></h3><p>Этот метод вызывается по HTTP GET-запросу на путь <code>/create-catalog-for-shop</code>. Аннотация <code>@ResponseBody</code> указывает, что метод возвращает данные в виде тела HTTP-ответа.</p><h3>2. Параметр <code>Long shopId</code></h3><p>Метод принимает ID магазина <code>shopId</code>, по которому затем будет получен список хлебных крошек (breadcrumbs) из базы данных.</p><h3>3. Получение списка хлебных крошек (breadcrumbs)</h3><pre class="!overflow-visible"><div class="contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative bg-token-sidebar-surface-primary dark:bg-gray-950"><div class="flex items-center text-token-text-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9 bg-token-sidebar-surface-primary dark:bg-token-main-surface-secondary">java</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-sidebar-surface-primary px-2 font-sans text-xs text-token-text-secondary dark:bg-token-main-surface-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Копіювати код</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-java">List&lt;String&gt; breadcrumbs = productRepository.findAllBreadcrumbsByShopId(shopId);
</code></div></div></pre><ul><li>Здесь вызывается метод <code>findAllBreadcrumbsByShopId</code> из <code>productRepository</code>, чтобы получить список хлебных крошек для магазина с данным <code>shopId</code>.</li><li>Список <code>breadcrumbs</code> содержит JSON-строки, представляющие собой цепочку категорий и подкатегорий, которые будут использоваться для создания каталога.</li></ul><h3>4. Проверка на пустой или null-список</h3><pre class="!overflow-visible"><div class="contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative bg-token-sidebar-surface-primary dark:bg-gray-950"><div class="flex items-center text-token-text-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9 bg-token-sidebar-surface-primary dark:bg-token-main-surface-secondary">java</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-sidebar-surface-primary px-2 font-sans text-xs text-token-text-secondary dark:bg-token-main-surface-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Копіювати код</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-java"><span class="hljs-keyword">if</span> (breadcrumbs == <span class="hljs-literal">null</span> || breadcrumbs.isEmpty()) {
    System.out.println(<span class="hljs-string">"No breadcrumbs found for the shop with ID: "</span> + shopId);
    <span class="hljs-keyword">return</span>;
}
</code></div></div></pre><ul><li>Если <code>breadcrumbs</code> равен <code>null</code> или пуст, выводится сообщение, что хлебные крошки не найдены, и метод завершает выполнение.</li></ul><h3>5. Удаление всех <code>null</code> значений из списка</h3><pre class="!overflow-visible"><div class="contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative bg-token-sidebar-surface-primary dark:bg-gray-950"><div class="flex items-center text-token-text-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9 bg-token-sidebar-surface-primary dark:bg-token-main-surface-secondary">java</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-sidebar-surface-primary px-2 font-sans text-xs text-token-text-secondary dark:bg-token-main-surface-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Копіювати код</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-java">breadcrumbs.removeIf(Objects::isNull);
</code></div></div></pre><ul><li>Если в списке <code>breadcrumbs</code> есть <code>null</code> значения, они удаляются методом <code>removeIf(Objects::isNull)</code>. Это обеспечивает, что массив, который будет создан позже, не будет содержать <code>null</code> элементов.</li></ul><h3>6. Преобразование списка в массив строк</h3><pre class="!overflow-visible"><div class="contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative bg-token-sidebar-surface-primary dark:bg-gray-950"><div class="flex items-center text-token-text-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9 bg-token-sidebar-surface-primary dark:bg-token-main-surface-secondary">java</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-sidebar-surface-primary px-2 font-sans text-xs text-token-text-secondary dark:bg-token-main-surface-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Копіювати код</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-java">String[] breadcrumbsArray = breadcrumbs.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[<span class="hljs-number">0</span>]);
</code></div></div></pre><ul><li>Метод <code>toArray</code> преобразует список <code>breadcrumbs</code> в массив <code>String[]</code>, который будет передан в парсер для построения каталога.</li></ul><h3>7. Создание каталога</h3><pre class="!overflow-visible"><div class="contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative bg-token-sidebar-surface-primary dark:bg-gray-950"><div class="flex items-center text-token-text-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9 bg-token-sidebar-surface-primary dark:bg-token-main-surface-secondary">java</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-sidebar-surface-primary px-2 font-sans text-xs text-token-text-secondary dark:bg-token-main-surface-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Копіювати код</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-java"><span class="hljs-type">BreadcrumbsToCatalogParser</span> <span class="hljs-variable">breadcrumbsToCatalogParser</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BreadcrumbsToCatalogParser</span>();
Map&lt;String, Object&gt; catalog = breadcrumbsToCatalogParser.buildCatalog(breadcrumbsArray);
</code></div></div></pre><ul><li>Создается экземпляр класса <code>BreadcrumbsToCatalogParser</code>.</li><li>Метод <code>buildCatalog(breadcrumbsArray)</code> использует массив <code>breadcrumbsArray</code> и строит иерархическую структуру каталога в виде <code>Map&lt;String, Object&gt;</code>. Возвращаемая структура хранится в переменной <code>catalog</code>.</li></ul><h3>8. Создание <code>Gson</code> объекта для записи JSON</h3><pre class="!overflow-visible"><div class="contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative bg-token-sidebar-surface-primary dark:bg-gray-950"><div class="flex items-center text-token-text-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9 bg-token-sidebar-surface-primary dark:bg-token-main-surface-secondary">java</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-sidebar-surface-primary px-2 font-sans text-xs text-token-text-secondary dark:bg-token-main-surface-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Копіювати код</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-java"><span class="hljs-type">Gson</span> <span class="hljs-variable">gson</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GsonBuilder</span>().setPrettyPrinting().create();
</code></div></div></pre><ul><li>Создается объект <code>Gson</code> с параметром <code>setPrettyPrinting</code>, который позволяет форматировать JSON с отступами для удобства чтения.</li></ul><h3>9. Запись каталога в файл JSON</h3><pre class="!overflow-visible"><div class="contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative bg-token-sidebar-surface-primary dark:bg-gray-950"><div class="flex items-center text-token-text-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9 bg-token-sidebar-surface-primary dark:bg-token-main-surface-secondary">java</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-sidebar-surface-primary px-2 font-sans text-xs text-token-text-secondary dark:bg-token-main-surface-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Копіювати код</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-java"><span class="hljs-keyword">try</span> (<span class="hljs-type">FileWriter</span> <span class="hljs-variable">fileWriter</span> <span class="hljs-operator">=</span> Objects.requireNonNull(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileWriter</span>(<span class="hljs-string">"src/main/resources/data/categories/catalog_"</span> + shopRepository.findByIdShop(shopId)
        .getNameShop() + <span class="hljs-string">"_"</span> + Timestamp.valueOf(LocalDateTime.now()).toString().replace(<span class="hljs-string">":"</span>, <span class="hljs-string">"-"</span>).replace(<span class="hljs-string">" "</span>, <span class="hljs-string">"_"</span>) + <span class="hljs-string">".json"</span>))) {
    gson.toJson(catalog, fileWriter);
    System.out.println(<span class="hljs-string">"Catalog has been saved to catalog.json"</span>);
} <span class="hljs-keyword">catch</span> (IOException e) {
    System.err.println(<span class="hljs-string">"Error writing catalog to file: "</span> + e.getMessage());
}
</code></div></div></pre><ul><li>Создается <code>FileWriter</code> для записи каталога в файл. Путь к файлу и его имя формируются следующим образом:<ul><li><code>shopRepository.findByIdShop(shopId).getNameShop()</code> — используется для получения имени магазина по <code>shopId</code>, чтобы включить его в название файла.</li><li><code>Timestamp.valueOf(LocalDateTime.now()).toString()</code> — текущая дата и время добавляются к имени файла для уникальности. Символы <code>:</code> и пробел заменяются на <code>-</code> и <code>_</code>, чтобы корректно сформировать имя файла.</li></ul></li><li>Метод <code>gson.toJson(catalog, fileWriter)</code> записывает объект <code>catalog</code> в файл в формате JSON.</li><li>Сообщение "Catalog has been saved to catalog.json" выводится в консоль при успешной записи.</li><li>Если возникает ошибка ввода-вывода, сообщение об ошибке выводится в консоль.</li></ul><h3>Итог</h3><p>Метод <code>createCatalogForShop</code> выполняет следующие задачи:</p><ol><li>Извлекает хлебные крошки для магазина.</li><li>Проверяет на наличие данных и удаляет <code>null</code> значения.</li><li>Преобразует данные хлебных крошек в иерархический каталог.</li><li>Записывает каталог в файл JSON с уникальным именем, включающим имя магазина и текущую дату и время.</li></ol></div>

### Deprecated
- без изменений

## [0.0.2] - 2024-11-01
### Added
- без изменений

### Fixed
- Исправлена ошибка в методе `updateByLinkSha3` класса `ProductService`, при которой поля `Breadcrumbs` и `Description` обновлялись и перезаписывали данные на `null`. Теперь эти поля исключены из обновления, так как их изменение обрабатывается другим модулем программы.

### Changed
- Обновлена логика метода `updateByLinkSha3` в `ProductService`: исключены поля `Breadcrumbs` и `Description` из обновления для предотвращения перезаписи данных, управляемых другим модулем.

### Deprecated
- без изменений

## [0.0.1] - 2023-10-01
- Первоначальный выпуск